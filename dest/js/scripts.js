!function(a){var e,s,t,n,o,c,i,r,p,l=a(".load-more"),d=0,u=!1;function w(){a.ajax({url:"./php/list.php",type:"get",data:{title:e,description:s,cost:t,discountCost:n,new:o,img:c,page:i,perPage:r,total:p},beforeSend:function(){u=!0,0!==parseInt(d)&&(console.log("beforeSend works, numberClicks=",d),!0===u?a(".loader-wrapper").css("display","block"):(a(".loader-wrapper").css("display","none"),f()),l.attr("disabled",!0))},success:function(e){var s=JSON.parse(e),t=s.entities;p=parseInt(s.total),r=parseInt(s.perPage),i=parseInt(s.page),p/r<i-1&&(l.hide(),f()),a.each(t,function(e,s){a(".products-wrapper .row").append("<li class='product-item-wrap text-center col-3 mb-4 hide'><div class='product-item col-12'><div class='product-img-wrap'><img class='product-img' src="+s.img+" alt="+s.title+"> </div><h3 class='product-title'>"+s.title+"</h3><p class='description'>"+s.description+"</p>"+(void 0!==s.discountCost&&null!==s.discountCost?"<div class='price-wrapper'> <span class='special-price'>$"+s.discountCost+"</span><span class='price old-price'>$ "+s.cost+"</span>":"<div class='price-wrapper'> <span class='price'>$"+s.cost+"</span>")+"</div>"+(null!==s.discountCost?"<span class='sales-icon'>Sale</span>":"")+(!1!==s.new&&null!==s.new?"<span class='new-icon'>New</span>":"")+"<button class='btn addtocart'>Add to cart</button> <button class='btn view'>View</button></div></li>")}),i++,a(".loader-wrapper").css("display","none")},complete:function(){u=!1,l.attr("disabled",!1)},error:function(e){return u=!1,console.log("Ajax request gave an error: ",e),u}})}function v(){1===(d+=1)&&f(),null!==parseInt(d)&&void 0!==d&&w()}function f(){var e=a(".product-item-wrap.hide");console.log("addedProducts",e),e.removeClass("hide"),e.hide().fadeIn(3e3)}a(window).on("load",function(){w()}),a(document).ready(function(){l.on("click",v)})}(jQuery);